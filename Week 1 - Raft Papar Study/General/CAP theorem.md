# CAP theorem
분산 데이터베이스 속성에 관한 이론. 
몇몇의 인스턴스가 다른 인스턴스와 통신할 수 없을 때 전체 DB를 어떻게 제어할지 결정함.

- Consistency, 일관성
    - 다른 DB에 접속하더라도 같은 정보를 공유하고 있어야 하는 성질.
    - 분산 DB 상의 어떤 노드와 통신하는지 상관 없이 같은 데이터를 조회할 수 있는 것을 의미함. 
- Availability, 가용성
    - 필요한 정보를 언제든지 알아낼 수 있는 성질.
    - 모든 요청이 응답 받을 수 있어야 함을 의미함. 심지어 작업이 실패하더라도 응답을 받을 수 있어야 함. 
    - 시스템이 중단되는 일 없이 언제든지 사용 가능한 상태여야 함.
- Partition Tolerance, 분할 허용성
    - 노드간 통신이 끊어지는 상황에 시스템이 여전히 작동하는 것을 의미함. 
    - 시스템 내 분할이 생겼을 때 시스템이 여전히 작동하는 것을 의미함.
    - 한 노드가 다른 노드와 통신할 수 없을 때 다른 복제 노드가 사용자 요청에 응답할 수 있어야 함. 

CAP 이론에서, CAP 모든 속성을 만족 시킬 수 없고 일반적으로 P는 만족 시키며 C 또는 A를 택일 해야 함.
한 노드가 다른 노드와 통신할 수 없을 때 다른 복제 노드에서 사용이 가능해야하는 것은 당연하며,
그를 만족하며 일관성과 가용성을 동시에 만족시킬 수 없다. 결과적으로 CP 또는 AP 시스템을 선택하게 됨.

예를 들어, 두 노드로 이루어진 분산 시스템에서 분할이 생긴 경우, 
요청을 정상적으로 수행해 일관성을 희생하고 가용성을 높이던가
(요청을 다시 하는 경우 멱등성 있는 요청이 아닌 이상 일관성이 손상될 수 밖에 없다)
잠시 요청 처리를 중단하고 중단된 노드가 재실행될 때까지 기다려 일관성을 지키는 방법 중에 하나를 선택할 수 있다.


## Reference
https://onduway.tistory.com/106
